<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>js_thrustvector (Co-op)</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <div id="game-container">
        <div id="screen">
            <!-- HUD -->
            <div id="hud">
                <div class="player-hud" id="p1-hud">
                    <div id="p1-name">P1 ðŸš€</div>
                    <div class="hud-item" id="p1-fuel">FUEL: 100%</div>
                    <div class="hud-item" id="p1-health">HP: 100%</div>
                </div>
                <div id="bomb-hud" class="hidden">
                    <div class="hud-item" id="harmony-meter">HARMONY: -</div>
                    <div class="hud-item" id="bomb-stability">BOMB: -</div>
                </div>
                <div id="dev-mode-hud" class="hidden">
                    DEV MODE
                </div>
                <div class="player-hud hidden" id="p2-hud">
                    <div id="p2-name">P2 ðŸš€</div>
                    <div class="hud-item" id="p2-fuel">FUEL: 100%</div>
                    <div class="hud-item" id="p2-health">HP: 100%</div>
                </div>
            </div>
            
            <div id="game-area">
                <canvas id="game-canvas"></canvas>
            </div>

            <!-- Game Over / Start Screen -->
            <div id="message-screen">
                <h1>js_thrustvector (Co-op)</h1>
                <p class="instructions">Select a level to begin.</p>
                <div id="level-select-container" class="button-container">
                    <!-- Level buttons will be added here by JS -->
                </div>
                <div id="settings-container" class="button-container">
                     <!-- Options button will be added here by JS -->
                </div>
                <p class="instructions small-text">P2 presses [â†‘] or [A]/[X] on a controller to join.</p>
            </div>

            <!-- In-Game Message Overlay -->
            <div id="level-message-screen" class="hidden"></div>

            <!-- Pause Screen Overlay -->
            <div id="pause-screen" class="hidden">
                <h2>PAUSED</h2>
                <p>Press [P] to Resume</p>
            </div>

            <!-- Map Screen Overlay -->
            <div id="map-screen" class="hidden">
                <h2>LEVEL MAP</h2>
                <p>Drag to Move | Press [M] to Close</p>
            </div>

             <!-- Options Screen Overlay -->
            <div id="options-screen" class="hidden">
                <div> <!-- Wrapper for content -->
                    <h2>Options</h2>
                    <div id="options-content">
                        <!-- Options will be dynamically inserted here -->
                    </div>
                </div>
                <!-- Button footer will be added here by JS -->
            </div>

            <!-- Help Screen Overlay -->
            <div id="help-screen" class="hidden">
                <div> <!-- Wrapper for content -->
                    <h2>How to Play</h2>
                    <p><strong>Objective:</strong> Work together to carry the bomb to the green extraction zone.</p>
                    <p><strong>Gamepad:</strong> D-Pad/Left Stick to Rotate, [A] Button/Right Trigger to Thrust, D-Pad Down to Clamp.</p>
                    <p><strong>General:</strong> [P] to Pause, [M] for Map, [H] for Help, [V] for Dev Mode.</p>
                    <p><strong>Harmony:</strong> Both ships must clamp the bomb to lift it. Fly smoothly and match your partner's angle to keep the bomb stable. Poor harmony or hard impacts will cause it to explode!</p>
                    <p><strong>Hazards:</strong> Colliding with cave walls will damage your ship. Landing on green pads will repair and refuel you.</p>

                    <div id="rebinding-ui">
                        <h3>Controls Rebinding (Keyboard)</h3>
                        <div class="rebind-grid">
                            <div class="rebind-player-col">
                                <h4>Player 1</h4>
                                <div class="rebind-row"><span>Thrust:</span> <button class="rebind-button" data-player="0" data-action="up">KeyW</button></div>
                                <div class="rebind-row"><span>Rotate Left:</span> <button class="rebind-button" data-player="0" data-action="left">KeyA</button></div>
                                <div class="rebind-row"><span>Rotate Right:</span> <button class="rebind-button" data-player="0" data-action="right">KeyD</button></div>
                                <div class="rebind-row"><span>Clamp:</span> <button class="rebind-button" data-player="0" data-action="clamp">KeyS</button></div>
                            </div>
                            <div class="rebind-player-col">
                                <h4>Player 2</h4>
                                <div class="rebind-row"><span>Thrust:</span> <button class="rebind-button" data-player="1" data-action="up">ArrowUp</button></div>
                                <div class="rebind-row"><span>Rotate Left:</span> <button class="rebind-button" data-player="1" data-action="left">ArrowLeft</button></div>
                                <div class="rebind-row"><span>Rotate Right:</span> <button class="rebind-button" data-player="1" data-action="right">ArrowRight</button></div>
                                <div class="rebind-row"><span>Clamp:</span> <button class="rebind-button" data-player="1" data-action="clamp">ArrowDown</button></div>
                            </div>
                        </div>
                    </div>
                    <p style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 2px dashed #555; opacity: 0.8; font-size: 0.8em;">Link to repo: <a href="https://github.com/pemmyz/js_thrustvector" target="_blank" style="color: var(--p1-color);">https://github.com/pemmyz/js_thrustvector</a></p>
                </div>
                <button id="close-help-button">Close</button>
            </div>
        </div>

        <div id="help-button-container">
            <button id="mute-button">Mute</button>
            <button id="toggle-options-button">Options</button>
            <button id="toggle-help-button">Press [H] for Help</button>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
